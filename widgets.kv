
WindowManager:
    MainWindow:
    EditingWindow:
    DisplayWindow:
    AddWindow:


<MainWindow>:
    name: "main"

    container: container

    tile: tile
    content: content

    FloatLayout:
        ScrollView:
            size_hint: 0.3, 1

            GridLayout:
                id: container
     
                size_hint_y: None

                height: self.minimum_height  
                row_default_height: 60
                cols:1

        GridLayout:
            cols: 1

            spacing: 0.1

            size_hint: 0.6, 0.75
            pos_hint: {"x": 0.35, "y": 0.1}

            ScrollView:
                size_hint: 1, 0.2

                ColorLabel:
                    id: tile

                    text: "the content"        
                               
                    size_hint_y: None
                    height: self.texture_size[1]
                    text_size: self.width, None


            ScrollView:
                size_hint: 1, 0.8

                ColorLabel:
                    id: content

                    text: "fhjgfkjgkjg"  

                    size_hint_y: None
                    height: self.texture_size[1]
                    text_size: self.width, None


        Button:
            text: "ADD"
            size_hint: 0.7, 0.1
            pos_hint: {"x": 0.3, "bottom": 1}     

            on_release:
                app.root.current = "add"
                root.manager.transition.direction = "left"

<DisplayWindow>:
    name: "display"

    title: title
    content: content

    FloatLayout:
        GridLayout:

            cols: 2

            size_hint: 1, 0.8
            pos_hint: {"top": 1}

            spacing: 5
            padding: 5

            ColorLabel:
                text: "Title"
                size_hint: 0.1, 0.5
                
            ColorLabel:
                id: title

                text: ""
                background_color: 0.1, 0.2, 0.7, 1
            

            ColorLabel:
                text: "Memo"
                size_hint: 0.1, 0.5

            ColorLabel:
                id: content

                text: ""
                background_color: 1, 1, 0, 0, 1

        GridLayout:
            cols: 3

            size_hint: 1, 0.2

            Button:
                text: "edit" 

                size_hint: 0.33, 0.1

                on_release:
                    app.root.current = "edit"
                    root.manager.transition.direction = "right"

            Button:
                text: "Delete"

                size_hint: 0.33, 0.1  

                on_release:
                    root.deleteMemo()

                    app.root.current = "main"
                    root.manager.transition.direction = "up"       

            Button:
                text: "Back"

                size_hint: 0.33, 0.1

                on_release:
                    app.root.current = "main"
                    root.manager.transition.direction = "up"


<EditingWindow>:
    name: "edit"

    title: title
    content: content

    FloatLayout:
        GridLayout:

            cols: 2

            ColorLabel:
                text: "Title"
                
                size_hint: 0.2, 0.1

            ColorLabel:
                id: title

                text: ""

                size_hint: 0.8, 0.1          

            ColorLabel:
                text: "Memo"
                size_hint: 0.2, 0.1

            TextInput:
                id: content

                text: ""

                size_hint: (0.8, 0.8)

            OpenSaveMemoPopupButton:
                text: "Done"

                size_hint: (0.2, 0.1)

                on_release:
                    self.show_popup()

            Button:
                text: "Cancle"

                size_hint: (0.2, 0.1)

                on_release:
                    app.root.current = "display"
                    root.manager.transition.direction = "down"

                
<AddWindow>:
    name: "add"

    help: help
    title: title
    content: content

    FloatLayout:
        GridLayout:

            size_hint: 1, 0.9
            cols: 2


            ColorLabel:
                text: "Title"
                
                size_hint: 0.2, 0.1

            TextInput:
                id: title

                text: ""

                multiline: False

                size_hint: 0.8, 0.1
                pos_hint: {"x": 0.1, "y": 0.9}            

            ColorLabel:
                text: "Memo"
                size_hint: 0.2, 0.1

            TextInput:
                id: content

                text: ""

                size_hint: (0.8, 0.8)
                pos_hint: {"x": 0.1, "y": 0.1}


            OpenSaveMemoPopupButton:
                text: "Done"

                size_hint: (0.2, 0.1)
                pos_hint: {"x": 0, "y": 0}

                on_release:
                    self.show_popup() if root.isFalidTitle() else root.addHelpMessage("Tile to short")

                    root.makeTitleContentGlobal() 


            Button:
                text: "Cancle"  
                
                size_hint: (0.2, 0.1)
                pos_hint: {"x": 0, "y": 0}              

                on_release:
                    app.root.current = "main"
                    root.manager.transition.direction = "right"                    

                    content.text = ""
                    title.text = ""
        ColorLabel:
            id: help

            text: "the help message"

            size_hint: 1, 0.1
            pos_hint: {"top": 1}


<saveMemoPopup>:

    size_hint: 0.5, 0.4

    GridLayout:
        cols: 1
        orientation: "lr-tb"

        ColorLabel: 
            text: "Changes has been made"

        GridLayout:
            cols: 1
            orientation: "tb-lr"

            Button:
                text: "Save Changes"

                on_release: 
                    root.saveChanges()

                    app.root.current = "main"
                    root.close()

            Button:
                text: "Discard Changes"

                on_release: 
                    app.root.current = "main"
                    root.dismiss()

            Button:
                text: "Cancel"

                on_release: 
                    root.dismiss()


<ColorLabel>:

    canvas.before:

        Color:
            rgb: 0.30, 0.30, 0.30

        Rectangle:
            pos: self.pos
            size: self.size

            

            