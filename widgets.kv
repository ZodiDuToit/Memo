
WindowManager:
    MainWindow:
    EditingWindow:
    DisplayWindow:
    AddWindow:


<MainWindow>:
    name: "main"

    container: container

    FloatLayout:

        BackgroundLabel:
            pos_hint: {"x": 0.025, "top": 0.975}
            size_hint: 0.25, 0.075

        ColorLabel:
            text: "Memos"

            pos_hint: {"x": 0.3, "y": 0.15}
            size_hint: 0.25, 0.075
    

        ScrollView:
            size_hint: 0.3, 0.875       

            GridLayout:
                id: container
     
                size_hint_y: None

                height: self.minimum_height  
                row_default_height: 60
                cols:1

                padding: 10

        BackgroundLabel:
            size_hint: 0.7, 0.85
            pos_hint: {"x": 0.3, "y": 0.15}

        GridLayout:
            cols: 1

            spacing: 2.5

            size_hint: 0.6, 0.75
            pos_hint: {"x": 0.35, "y": 0.2}

            ColorLabel:
                text: "Title"
                
                size_hint: 0.2, 0.1

            ColorLabel:
                text: root.getRandomTitle()

                multiline: False

                size_hint: 0.8, 0.1
                pos_hint: {"x": 0.1, "y": 0.9}            

            ColorLabel:
                text: "Memo"
                size_hint: 0.2, 0.1

            ColorLabel:
                text: root.getRandomContent()

                size_hint: (0.8, 0.8)
                pos_hint: {"x": 0.1, "y": 0.1}
 

        Button:
            text: "ADD"
            size_hint: 0.7, 0.1
            pos_hint: {"x": 0.3, "bottom": 1}     

            on_release:
                app.root.current = "add"
                root.manager.transition.direction = "left"

<DisplayWindow>:
    name: "display"

    title: title
    content: content

    FloatLayout:

        BackgroundLabel:
            size_hint: 0.95, 0.75
            pos_hint: {"top": 0.975, "x": 0.025}

        GridLayout:

            cols: 1

            size_hint: 1, 0.8
            pos_hint: {"top": 1}

            spacing: 5
            padding: root.width * 0.05

            ColorLabel:
                text: "Title"
                
                size_hint: 0.2, 0.1

            ColorLabel:
                id: title

                multiline: False

                size_hint: 0.8, 0.1
                pos_hint: {"x": 0.1, "y": 0.9}            

            ColorLabel:
                text: "Content"
                size_hint: 0.2, 0.1

            ColorLabel:
                id: content

                size_hint: (0.8, 0.8)
                pos_hint: {"x": 0.1, "y": 0.1}
  
        
        GridLayout:
            cols: 3

            size_hint: 1, 0.1

            Button:
                text: "edit" 

                size_hint: 0.33, 0.1

                on_release:
                    app.root.current = "edit"
                    root.manager.transition.direction = "right"

            Button:
                text: "Delete"

                size_hint: 0.33, 0.1  

                on_release:
                    root.deleteMemo()

                    app.root.current = "main"
                    root.manager.transition.direction = "up"       

            Button:
                text: "Back"

                size_hint: 0.33, 0.1

                on_release:
                    app.root.current = "main"
                    root.manager.transition.direction = "up"


<EditingWindow>:
    name: "edit"

    title: title
    content: content

    FloatLayout:
        GridLayout:

            cols: 2

            ColorLabel:
                text: "Title"
                
                size_hint: 0.2, 0.1

            ColorLabel:
                id: title

                text: ""

                size_hint: 0.8, 0.1          

            ColorLabel:
                text: "Content"
                size_hint: 0.2, 0.1

            TextInput:
                id: content

                text: ""

                size_hint: (0.8, 0.8)

            OpenSaveMemoPopupButton:
                text: "Done"

                size_hint: (0.2, 0.1)

                on_release:
                    self.show_popup()

            Button:
                text: "Cancle"

                size_hint: (0.2, 0.1)

                on_release:
                    app.root.current = "display"
                    root.manager.transition.direction = "down"

                
<AddWindow>:
    name: "add"

    help: help
    title: title
    content: content

    FloatLayout:
        GridLayout:

            size_hint: 1, 0.9
            cols: 2


            ColorLabel:
                text: "Title"
                
                size_hint: 0.2, 0.1

            TextInput:
                id: title

                text: ""

                multiline: False

                size_hint: 0.8, 0.1
                pos_hint: {"x": 0.1, "y": 0.9}            

            ColorLabel:
                text: "Memo"
                size_hint: 0.2, 0.1

            TextInput:
                id: content

                text: ""

                size_hint: (0.8, 0.8)
                pos_hint: {"x": 0.1, "y": 0.1}


            OpenSaveMemoPopupButton:
                text: "Done"

                size_hint: (0.2, 0.1)
                pos_hint: {"x": 0, "y": 0}

                on_release:
                    self.show_popup() if root.isFalidTitle() else root.addHelpMessage("Please add a Title")

                    root.makeTitleContentGlobal() 


            Button:
                text: "Cancle"  
                
                size_hint: (0.2, 0.1)
                pos_hint: {"x": 0, "y": 0}              

                on_release:
                    app.root.current = "main"
                    root.manager.transition.direction = "right"                    

                    content.text = ""
                    title.text = ""
        ColorLabel:
            id: help

            text: ""

            size_hint: 1, 0.1
            pos_hint: {"top": 1}


<saveMemoPopup>:

    title: ""
    size_hint: 0.5, 0.4

    GridLayout:
        cols: 1
        orientation: "lr-tb"

        GridLayout:
            cols: 1
            orientation: "tb-lr"

            Button:
                text: "Save"

                on_release: 
                    root.saveChanges()

                    app.root.current = "main"
                    root.close()

            Button:
                text: "Discard Changes"

                on_release: 
                    app.root.current = "main"
                    root.dismiss()

            Button:
                text: "Cancel"

                on_release: 
                    root.dismiss()


<ColorLabel>:

    size_hint_y: None
    height: self.texture_size[1]
    text_size: self.width, None

    halign: "center"

    canvas.before:
        Color:
            rgb: 0.30, 0.30, 0.30

        Rectangle:
            pos: self.pos
            size: self.size

<BackgroundLabel>:
    canvas.before:
        Color:
            rgb: 0.70, 0.30, 0.1

        Rectangle:
            pos: self.pos
            size: self.size
    
<Button>:
    halign: "center"

    size_hint_y: None
    height: self.texture_size[1]
    text_size: self.width, None

            